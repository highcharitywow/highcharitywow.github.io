<html>
<head>
	<title> Player Details - High Charity DKP (Classic WoW Incendius)</title>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
</head>
<script type="text/javascript">


	function getDKPHistory(player) {
		var historyEntries = [];
		$.getJSON('dkphistory.json', function (json) {
			for (var i = 0; i < json.dkphistory.historyentry.length; i++) {
				if (json.dkphistory.historyentry[i].playerstring.indexOf(player+',') > 0) {
					json.dkphistory.historyentry[i].playerstring = player;
					historyEntries.push(json.dkphistory.historyentry[i]);
				}
			}
		});
		return historyEntries;
	}

	function getLootHistory(player) {
		var historyEntries = [];
		$.getJSON('loothistory.json', function (json) {
			for (var i = 0; i < json.loothistory.lootentry.length; i++) {
				if (json.loothistory.lootentry[i].player.indexOf(player) > 0) {
					historyEntries.push(json.loothistory.lootentry[i]);
				}
			}
		});
		return historyEntries;
	}

	$(document).ready(function() {
	
		var dkphistory = getDKPHistory('Renegade');
		var loothistory = getLootHistory('Renegade');
		console.log(dkphistory);
		console.log(loothistory);
	
	
		var dkpTable = $('#dkptable').DataTable({
			ajax: {
				url: 'dkptable.json',
				dataSrc: 'dkptable.dkpentry'
			},
			columns: [
				{ data: 'player' },
				{ data: 'class' },
				{ data: 'dkp' }
			]
		});
		
		
	});	
</script>
<body>

<h4>DKP History</h4>
<table id="dkptable" class="display" style="width:100%">
<thead>
<tr><th>Player</th><th>Class</th><th>DKP</th></tr>
</thead>
<tfoot>
<tr><th>Player</th><th>Class</th><th>DKP</th></tr>
</tfoot>
</table>

</body>
</html>